<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Zenith | The Ninja Way</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Poppins:wght@300;400;600&family=Permanent+Marker&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --naruto-orange: #ff7300;
            --ds-green: #2ecc71;
            --ds-black: #1a1a1a;
            --op-red: #e74c3c;
            --zenith-purple: #9b59b6;
            --bg-dark: #050505;
            --glass: rgba(20, 20, 20, 0.7);
            --glass-border: rgba(255, 255, 255, 0.08);
            --neon-glow: 0 0 10px rgba(255, 115, 0, 0.5);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--bg-dark);
            color: #fff;
            overflow: hidden; /* Prevent body scroll, handle inside app */
            height: 100vh;
            width: 100vw;
        }

        /* --- 3D Background --- */
        #canvas-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            opacity: 0.4;
        }

        /* --- Layout --- */
        #app {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* Sidebar Navigation */
        .sidebar {
            width: 80px;
            height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            border-right: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 20px;
            z-index: 100;
            transition: width 0.3s;
        }
        
        .sidebar:hover { width: 220px; }
        .sidebar:hover .nav-text { display: inline-block; opacity: 1; }

        .logo {
            font-family: 'Permanent Marker', cursive;
            color: var(--naruto-orange);
            font-size: 1.5rem;
            margin-bottom: 40px;
            text-shadow: var(--neon-glow);
            white-space: nowrap;
            overflow: hidden;
        }

        .nav-item {
            width: 100%;
            padding: 15px 25px;
            color: #888;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: 0.3s;
            text-decoration: none;
            position: relative;
        }

        .nav-item:hover, .nav-item.active {
            color: #fff;
            background: linear-gradient(90deg, rgba(255,115,0,0.1), transparent);
            border-left: 3px solid var(--naruto-orange);
        }

        .nav-item i { font-size: 1.2rem; width: 25px; text-align: center; }
        .nav-text { display: none; opacity: 0; transition: opacity 0.2s; white-space: nowrap; font-family: 'Orbitron'; font-size: 0.9rem; }

        /* Main Content Area */
        .main-view {
            flex-grow: 1;
            position: relative;
            overflow: hidden;
        }

        .page {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            padding: 20px 40px;
            overflow-y: auto;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
            pointer-events: none;
            visibility: hidden;
        }

        .page.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
            visibility: visible;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 3px; }

        /* --- Components --- */
        h1, h2 { font-family: 'Orbitron'; text-transform: uppercase; margin-bottom: 20px; }
        h1 { color: var(--naruto-orange); letter-spacing: 2px; text-shadow: 0 0 15px rgba(255,115,0,0.3); }

        .glass-card {
            background: var(--glass);
            border: 1px solid var(--glass-border);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 20px;
            backdrop-filter: blur(12px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: transform 0.3s, border-color 0.3s;
        }
        .glass-card:hover { transform: translateY(-2px); border-color: rgba(255,255,255,0.2); }

        .btn {
            background: transparent;
            border: 1px solid var(--naruto-orange);
            color: var(--naruto-orange);
            padding: 10px 25px;
            font-family: 'Orbitron';
            cursor: pointer;
            transition: 0.3s;
            border-radius: 4px;
            text-transform: uppercase;
            font-size: 0.8rem;
            letter-spacing: 1px;
        }
        .btn:hover { background: var(--naruto-orange); color: #000; box-shadow: 0 0 20px var(--naruto-orange); }
        .btn-green { border-color: var(--ds-green); color: var(--ds-green); }
        .btn-green:hover { background: var(--ds-green); color: #000; box-shadow: 0 0 20px var(--ds-green); }

        /* --- Specific Pages --- */

        /* Dashboard */
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-box { text-align: center; }
        .stat-number { font-size: 2.5rem; font-family: 'Orbitron'; color: #fff; }
        .stat-label { font-size: 0.8rem; color: #aaa; }

        /* Timer Pages (DSA/Web) */
        .timer-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 60vh;
            position: relative;
        }
        .timer-circle {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            font-family: 'Orbitron';
            position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
        }
        .timer-circle::before {
            content: ''; position: absolute; top: -5px; left: -5px; right: -5px; bottom: -5px;
            border-radius: 50%; border: 2px solid transparent;
            border-top-color: currentColor; border-bottom-color: currentColor;
            animation: spin 3s linear infinite paused;
        }
        .timer-running .timer-circle::before { animation-play-state: running; }
        
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* Habits */
        .habit-list { list-style: none; }
        .habit-item {
            background: rgba(255,255,255,0.03);
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 3px solid #333;
            transition: 0.3s;
        }
        .habit-item.done { border-left-color: var(--ds-green); background: rgba(46, 204, 113, 0.1); }
        .habit-streak { font-size: 0.8rem; color: var(--naruto-orange); }

        /* Chat */
        #chat-container { display: flex; flex-direction: column; height: 85vh; }
        #chat-messages { flex-grow: 1; overflow-y: auto; padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .msg { max-width: 80%; padding: 12px 18px; border-radius: 12px; font-size: 0.95rem; line-height: 1.5; }
        .msg.user { align-self: flex-end; background: rgba(255, 115, 0, 0.2); border: 1px solid var(--naruto-orange); color: #fff; }
        .msg.ai { align-self: flex-start; background: rgba(155, 89, 182, 0.1); border: 1px solid var(--zenith-purple); color: #ddd; }
        .chat-input-box { display: flex; gap: 10px; padding-top: 20px; }
        .chat-input-box input {
            flex-grow: 1; background: rgba(0,0,0,0.5); border: 1px solid #444; color: #fff; padding: 12px; border-radius: 6px; font-family: 'Poppins';
        }
        .chat-input-box input:focus { outline: none; border-color: var(--zenith-purple); }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .sidebar { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; flex-direction: row; justify-content: space-around; padding: 0; border-right: none; border-top: 1px solid var(--glass-border); }
            .sidebar:hover { width: 100%; }
            .logo, .nav-text { display: none; }
            .nav-item { padding: 10px; flex-direction: column; justify-content: center; gap: 0; width: auto; border-left: none; }
            .nav-item:hover, .nav-item.active { background: transparent; color: var(--naruto-orange); border-bottom: 2px solid var(--naruto-orange); border-left: none; }
            .page { padding: 20px 15px 80px 15px; }
            #app { flex-direction: column; }
            .timer-circle { width: 220px; height: 220px; font-size: 3rem; }
        }

    </style>
</head>
<body>

    <!-- 3D BG -->
    <div id="canvas-bg"></div>

    <div id="app">
        
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">ZENITH</div>
            <a href="#home" class="nav-item active" onclick="route('#home')">
                <i class="fas fa-home"></i> <span class="nav-text">Dashboard</span>
            </a>
            <a href="#dsa" class="nav-item" onclick="route('#dsa')">
                <i class="fas fa-brain"></i> <span class="nav-text">DSA Focus</span>
            </a>
            <a href="#webdev" class="nav-item" onclick="route('#webdev')">
                <i class="fas fa-code"></i> <span class="nav-text">Web Dev</span>
            </a>
            <a href="#habits" class="nav-item" onclick="route('#habits')">
                <i class="fas fa-scroll"></i> <span class="nav-text">Habit Scroll</span>
            </a>
            <a href="#analytics" class="nav-item" onclick="route('#analytics')">
                <i class="fas fa-chart-line"></i> <span class="nav-text">Analysis</span>
            </a>
            <a href="#chat" class="nav-item" onclick="route('#chat')">
                <i class="fas fa-robot"></i> <span class="nav-text">Zenith AI</span>
            </a>
        </nav>

        <!-- Main View -->
        <main class="main-view">
            
            <!-- HOME PAGE -->
            <section id="home" class="page active">
                <h1>Welcome Back, Tejash</h1>
                <div class="stats-grid">
                    <div class="glass-card stat-box">
                        <div class="stat-number" id="home-dsa-time">0h</div>
                        <div class="stat-label">DSA Today</div>
                    </div>
                    <div class="glass-card stat-box">
                        <div class="stat-number" id="home-dev-time">0h</div>
                        <div class="stat-label">Dev Today</div>
                    </div>
                    <div class="glass-card stat-box">
                        <div class="stat-number" id="home-streak">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                </div>

                <div class="glass-card">
                    <h2><i class="fas fa-bolt" style="color:var(--naruto-orange)"></i> Quick Actions</h2>
                    <div style="display:flex; gap:15px; flex-wrap:wrap;">
                        <button class="btn" onclick="route('#dsa')">Start DSA Session</button>
                        <button class="btn btn-green" onclick="route('#webdev')">Start Coding</button>
                        <button class="btn" style="border-color:var(--zenith-purple); color:var(--zenith-purple)" onclick="route('#chat')">Consult Zenith</button>
                    </div>
                </div>
            </section>

            <!-- DSA PAGE -->
            <section id="dsa" class="page">
                <h1>DSA Training <small style="font-size:0.5em; opacity:0.6">Target: 3h</small></h1>
                <div class="timer-container" id="dsa-container">
                    <div class="timer-circle" style="color: var(--naruto-orange);">
                        <span id="dsa-display">00:00:00</span>
                    </div>
                    <div style="margin-top: 30px; display:flex; gap: 20px;">
                        <button class="btn" onclick="timer.toggle('dsa')">Toggle Kai</button>
                        <button class="btn" style="border-color:#e74c3c; color:#e74c3c" onclick="timer.reset('dsa')">Reset</button>
                    </div>
                    <p style="margin-top:20px; color:#666;">Focus or be left behind.</p>
                </div>
            </section>

            <!-- WEB DEV PAGE -->
            <section id="webdev" class="page">
                <h1>Web Development <small style="font-size:0.5em; opacity:0.6">Target: 3h</small></h1>
                <div class="timer-container" id="web-container">
                    <div class="timer-circle" style="color: var(--ds-green);">
                        <span id="web-display">00:00:00</span>
                    </div>
                    <div style="margin-top: 30px; display:flex; gap: 20px;">
                        <button class="btn btn-green" onclick="timer.toggle('web')">Build Project</button>
                        <button class="btn" style="border-color:#e74c3c; color:#e74c3c" onclick="timer.reset('web')">Reset</button>
                    </div>
                    <p style="margin-top:20px; color:#666;">Create your legacy.</p>
                </div>
            </section>

            <!-- HABITS PAGE -->
            <section id="habits" class="page">
                <h1>Ninja Way (Habits)</h1>
                <div class="glass-card">
                    <div style="display:flex; gap:10px; margin-bottom:20px;">
                        <input type="text" id="habit-input" placeholder="New discipline..." style="flex-grow:1; background:transparent; border:1px solid #555; padding:10px; color:#fff;">
                        <button class="btn" onclick="habits.add()">Add</button>
                    </div>
                    <ul class="habit-list" id="habit-ul">
                        <!-- Habits rendered here -->
                    </ul>
                </div>
            </section>

            <!-- ANALYTICS PAGE -->
            <section id="analytics" class="page">
                <h1>Training Logs</h1>
                <div class="glass-card">
                    <canvas id="chart-canvas" height="250"></canvas>
                </div>
            </section>

            <!-- CHAT PAGE -->
            <section id="chat" class="page">
                <div id="chat-container">
                    <div style="border-bottom: 1px solid #333; padding-bottom:10px; margin-bottom:10px;">
                        <h2>Zenith AI <span style="font-size:0.8rem; color:var(--zenith-purple)">Online</span></h2>
                    </div>
                    <div id="chat-messages">
                        <div class="msg ai">Greetings. I am Zenith. How can I assist your productivity today?</div>
                    </div>
                    <div class="chat-input-box">
                        <input type="text" id="chat-input" placeholder="Ask about algorithms, code, or motivation..." onkeypress="if(event.key==='Enter') chat.send()">
                        <button class="btn" style="border-color:var(--zenith-purple); color:var(--zenith-purple)" onclick="chat.send()">Send</button>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <script>
        // --- CONFIG ---
        // SECURITY WARNING: In a real production app, use a proxy server. 
        // This is a client-side prototype as requested.
        const API_KEY = "AIzaSyDRZgpN6MJtV57Zoammjbl7-FzmmUTQItc"; 
        const GEMINI_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${API_KEY}`;
        
        // --- DATA STORE ---
        const todayStr = new Date().toDateString();
        
        const defaultData = {
            timers: {
                dsa: { current: 0, isRunning: false, target: 10800 },
                web: { current: 0, isRunning: false, target: 10800 }
            },
            habits: [],
            history: {}, // { "Date": { dsa: 0, web: 0 } }
            lastLogin: todayStr
        };

        let data = JSON.parse(localStorage.getItem('zenith_app_v2')) || defaultData;

        // Daily Reset Check
        if (data.lastLogin !== todayStr) {
            // Save yesterday's totals to history
            if (data.history[data.lastLogin]) {
               // already saved?
            } else {
                // Should save previous day, simplified for prototype:
                // We just reset current timers for the new day
            }
            data.timers.dsa.current = 0;
            data.timers.web.current = 0;
            data.habits.forEach(h => h.completed = false);
            data.lastLogin = todayStr;
            save();
        }

        function save() {
            localStorage.setItem('zenith_app_v2', JSON.stringify(data));
            updateHomeStats();
        }

        // --- ROUTER ---
        function route(hash) {
            // Reset active classes
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            // Activate target
            const id = hash.replace('#', '');
            const page = document.getElementById(id) || document.getElementById('home');
            page.classList.add('active');

            // Nav active state
            const navLink = document.querySelector(`a[href="#${id}"]`);
            if(navLink) navLink.classList.add('active');

            // Special inits
            if(id === 'analytics') renderChart();
            if(id === 'habits') habits.render();
        }

        // Init Router
        window.addEventListener('hashchange', () => route(window.location.hash));
        if(!window.location.hash) route('#home');
        else route(window.location.hash);


        // --- TIMERS ---
        const timer = {
            intervals: {},
            
            format: (secs) => {
                const h = Math.floor(secs / 3600).toString().padStart(2,'0');
                const m = Math.floor((secs % 3600) / 60).toString().padStart(2,'0');
                const s = (secs % 60).toString().padStart(2,'0');
                return `${h}:${m}:${s}`;
            },

            updateUI: (type) => {
                const display = document.getElementById(`${type}-display`);
                const container = document.getElementById(`${type}-container`);
                const tData = data.timers[type];
                
                display.innerText = timer.format(tData.current);
                
                if (tData.isRunning) container.classList.add('timer-running');
                else container.classList.remove('timer-running');
            },

            toggle: (type) => {
                const tData = data.timers[type];
                if (tData.isRunning) {
                    // Stop
                    clearInterval(timer.intervals[type]);
                    tData.isRunning = false;
                } else {
                    // Start
                    tData.isRunning = true;
                    timer.intervals[type] = setInterval(() => {
                        tData.current++;
                        timer.updateUI(type);
                        
                        // Log to history for charts
                        if(!data.history[todayStr]) data.history[todayStr] = { dsa: 0, web: 0 };
                        data.history[todayStr][type]++;
                        
                        if(tData.current % 10 === 0) save(); // Autosave every 10s
                    }, 1000);
                }
                timer.updateUI(type);
                save();
            },

            reset: (type) => {
                clearInterval(timer.intervals[type]);
                data.timers[type].isRunning = false;
                data.timers[type].current = 0;
                timer.updateUI(type);
                save();
            }
        };

        // Init Timers UI
        timer.updateUI('dsa');
        timer.updateUI('web');

        // --- HABITS ---
        const habits = {
            add: () => {
                const input = document.getElementById('habit-input');
                if(!input.value) return;
                data.habits.push({ id: Date.now(), text: input.value, completed: false, streak: 0 });
                input.value = '';
                save();
                habits.render();
            },
            toggle: (id) => {
                const h = data.habits.find(x => x.id === id);
                if(h) {
                    h.completed = !h.completed;
                    h.streak += h.completed ? 1 : -1;
                    if(h.streak < 0) h.streak = 0;
                    save();
                    habits.render();
                }
            },
            delete: (id) => {
                data.habits = data.habits.filter(x => x.id !== id);
                save();
                habits.render();
            },
            render: () => {
                const ul = document.getElementById('habit-ul');
                ul.innerHTML = '';
                data.habits.forEach(h => {
                    ul.innerHTML += `
                        <li class="habit-item ${h.completed ? 'done' : ''}">
                            <div onclick="habits.toggle(${h.id})" style="cursor:pointer; flex-grow:1">
                                <b>${h.text}</b> <br>
                                <span class="habit-streak">Streak: ${h.streak} ðŸ”¥</span>
                            </div>
                            <i class="fas fa-trash" onclick="habits.delete(${h.id})" style="color:#e74c3c; cursor:pointer"></i>
                        </li>
                    `;
                });
            }
        };

        // --- ANALYTICS ---
        function renderChart() {
            const ctx = document.getElementById('chart-canvas').getContext('2d');
            const dates = Object.keys(data.history).slice(-7); // Last 7 entries
            const dsaVals = dates.map(d => (data.history[d].dsa / 3600).toFixed(1));
            const webVals = dates.map(d => (data.history[d].web / 3600).toFixed(1));

            if(window.myChart) window.myChart.destroy();

            window.myChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: dates.length ? dates : [todayStr],
                    datasets: [
                        { label: 'DSA (h)', data: dsaVals.length ? dsaVals : [0], backgroundColor: '#ff7300' },
                        { label: 'Web (h)', data: webVals.length ? webVals : [0], backgroundColor: '#2ecc71' }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, grid: { color:'rgba(255,255,255,0.05)' }, ticks: {color:'#888'} },
                        x: { grid: { display:false }, ticks: {color:'#888'} }
                    },
                    plugins: { legend: { labels: { color:'#fff' } } }
                }
            });
        }

        // --- DASHBOARD STATS ---
        function updateHomeStats() {
            document.getElementById('home-dsa-time').innerText = (data.timers.dsa.current / 3600).toFixed(1) + 'h';
            document.getElementById('home-dev-time').innerText = (data.timers.web.current / 3600).toFixed(1) + 'h';
            // Simple streak logic
            const activeHabits = data.habits.filter(h => h.completed).length;
            document.getElementById('home-streak').innerText = activeHabits;
        }
        updateHomeStats();

        // --- ZENITH AI CHAT ---
        const chat = {
            send: async () => {
                const input = document.getElementById('chat-input');
                const txt = input.value.trim();
                if(!txt) return;

                const box = document.getElementById('chat-messages');
                box.innerHTML += `<div class="msg user">${txt}</div>`;
                input.value = '';
                box.scrollTop = box.scrollHeight;

                box.innerHTML += `<div class="msg ai" id="temp-loading">Zenith is thinking...</div>`;
                box.scrollTop = box.scrollHeight;

                try {
                    const response = await fetch(GEMINI_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{ text: `You are Zenith, a wise, disciplined, anime-style productivity mentor. Your student is Tejash. Keep answers concise and motivating. User says: ${txt}` }]
                            }]
                        })
                    });
                    
                    const resData = await response.json();
                    document.getElementById('temp-loading').remove();
                    
                    if(resData.candidates && resData.candidates[0]) {
                        const reply = resData.candidates[0].content.parts[0].text;
                        box.innerHTML += `<div class="msg ai">${marked.parse(reply)}</div>`;
                    } else {
                        box.innerHTML += `<div class="msg ai">I cannot connect to the Chakra network right now. (API Error)</div>`;
                    }
                } catch (err) {
                    document.getElementById('temp-loading').remove();
                    box.innerHTML += `<div class="msg ai">Connection interrupted. ${err.message}</div>`;
                }
                box.scrollTop = box.scrollHeight;
            }
        };

        // --- THREE.JS BACKGROUND (Chakra Particles) ---
        function initThree() {
            const container = document.getElementById('canvas-bg');
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true });
            
            renderer.setSize(window.innerWidth, window.innerHeight);
            container.appendChild(renderer.domElement);

            // Particles
            const geometry = new THREE.BufferGeometry();
            const count = 1500;
            const positions = new Float32Array(count * 3);
            const colors = new Float32Array(count * 3);

            for(let i=0; i<count*3; i+=3) {
                positions[i] = (Math.random() - 0.5) * 30; // x
                positions[i+1] = (Math.random() - 0.5) * 30; // y
                positions[i+2] = (Math.random() - 0.5) * 30; // z
                
                // Mix colors: Orange, Green, Red
                const r = Math.random();
                if(r > 0.6) { // Naruto Orange
                    colors[i] = 1.0; colors[i+1] = 0.45; colors[i+2] = 0.0; 
                } else if (r > 0.3) { // DS Green
                    colors[i] = 0.18; colors[i+1] = 0.8; colors[i+2] = 0.44; 
                } else { // Purple/Dark
                    colors[i] = 0.6; colors[i+1] = 0.35; colors[i+2] = 0.71; 
                }
            }

            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

            const material = new THREE.PointsMaterial({
                size: 0.1,
                vertexColors: true,
                transparent: true,
                opacity: 0.8
            });

            const particles = new THREE.Points(geometry, material);
            scene.add(particles);
            camera.position.z = 10;

            // Animation
            let mouseX = 0;
            let mouseY = 0;

            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX / window.innerWidth - 0.5;
                mouseY = e.clientY / window.innerHeight - 0.5;
            });

            const animate = () => {
                requestAnimationFrame(animate);
                
                particles.rotation.y += 0.002;
                particles.rotation.x += 0.001;

                // Subtle parallax based on mouse
                camera.position.x += (mouseX * 5 - camera.position.x) * 0.05;
                camera.position.y += (-mouseY * 5 - camera.position.y) * 0.05;
                camera.lookAt(scene.position);

                renderer.render(scene, camera);
            };

            animate();

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        initThree();

    </script>
</body>
</html>


